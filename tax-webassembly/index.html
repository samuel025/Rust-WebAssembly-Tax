<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebAssembly</title>
</head>
<body>
    <h1>WebAssembly</h1>
    <label for="income">Income:</label>
    <input type="number" id="income" name="income">
    <button id="calculateButton">Calculate</button>
    <p id="result"></p>
    <script type="module">
        import init, {calculate_tax} from "./pkg/tax_webassembly.js";

        async function run() {
            await init()
            function calculateTax() {
                const income = parseFloat(document.getElementById("income").value)
                const tax = calculate_tax(income)
                document.getElementById("result").innerText = `Tax: $${tax.toFixed(2)}`
            }
            document.getElementById("calculateButton").addEventListener("click", calculateTax)
        }

        run()
    </script>
</body>
</html>